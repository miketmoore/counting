(this.webpackJsonpcounting=this.webpackJsonpcounting||[]).push([[0],{40:function(e,t,n){},60:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(10),i=n.n(a),o=(n(60),n(40),n(11)),s=n(18),u=n.n(s),j=n(26),l=function(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(o.a)(a,2),s=i[0],l=i[1],d=Object(r.useState)(null),b=Object(o.a)(d,2),O=b[0],f=b[1],h=function(e){var t=e.enabled,n=Object(r.useState)(null),c=Object(o.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(!1),l=Object(o.a)(s,2),d=l[0],b=l[1],O=Object(r.useState)(null),f=Object(o.a)(O,2),h=f[0],p=f[1],g=Object(r.useRef)(!0);return Object(r.useEffect)((function(){null==a&&t&&function(){var e=Object(j.a)(u.a.mark((function e(){var t,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){p(new Error(e)),b(!1)},e.prev=1,b(!0),e.next=5,fetch("/api/count/get",{method:"GET"});case 5:return(n=e.sent).status>=400&&t("Get request returned an error"),e.next=9,n.json();case 9:r=e.sent,c=r.count,g.current&&(b(!1),i(c)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t("Get request failed");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}()()}),[a,t]),Object(r.useEffect)((function(){return function(){g.current=!1}}),[]),{count:a,isLoading:d,error:h}}({enabled:n}),p=h.count,g=h.isLoading,v=h.error;Object(r.useEffect)((function(){null!=p&&(f(p),c(!1))}),[p,f,c]);var x=function(e){var t=e.requestEnabled,n=e.setRequestEnabled,c=Object(r.useState)(null),a=Object(o.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(null),d=Object(o.a)(l,2),b=d[0],O=d[1],f=Object(r.useState)(!1),h=Object(o.a)(f,2),p=h[0],g=h[1],v=Object(r.useRef)(!0);return Object(r.useEffect)((function(){var e=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){O(new Error(e)),g(!1)},e.prev=1,g(!0),e.next=5,fetch("/api/count/update",{method:"PUT"});case 5:return(n=e.sent).status>=400&&t("Update request returned an error"),e.next=9,n.json();case 9:r=e.sent,c=r.count,v.current&&(s(c),g(!1)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t("Update request failed");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();t&&(n(!1),e())}),[v,t,n,O,g,s]),Object(r.useEffect)((function(){return function(){v.current=!1}}),[]),{count:i,isLoading:p,error:b}}({requestEnabled:s,setRequestEnabled:l}),m=x.count,C=x.isLoading,w=x.error;return Object(r.useEffect)((function(){m&&f(m)}),[m]),Object(r.useDebugValue)("Count:".concat(O)),{isLoadingInitial:g,isLoadingUpdate:C,error:v||w,count:null==O?0:O,requestUpdatedCount:function(){return l(!0)}}},d=n(93),b=n(99),O=n(101),f=n(94),h=n(100),p=n(32),g=n(104),v=n(98),x=n(102),m=n(91),C=n(3);function w(e){var t=e.testId,n=e.ariaLabel,r=e.isLoading,c=e.onClick,a=e.children,i=e.color;return Object(C.jsx)(m.a,{"data-testid":t,color:i,"aria-label":n,onClick:function(){return c()},disabled:r,children:r?Object(C.jsx)(d.a,{"data-testid":"loadingfab-progress"}):a})}var E=n(95);function y(e){var t=e.count,n=e.onClick,r=e.isLoading;return Object(C.jsxs)(f.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center","data-testid":"count-view",children:[Object(C.jsx)(f.a,{item:!0,children:Object(C.jsxs)(p.a,{variant:"h3",component:"h2",children:["Count: ",Object(C.jsx)("span",{"data-testid":"count-value",children:t})]})}),Object(C.jsx)(f.a,{item:!0,children:Object(C.jsx)(w,{color:"primary",isLoading:r,onClick:n,testId:"update-button",ariaLabel:"update",children:Object(C.jsx)(E.a,{"data-testid":"plus-one-icon"})})})]})}var L=n(49),S=n(96),k=n(103),I=n(97);function q(e){var t=e.count,n=Object(r.useState)([]),c=Object(o.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){t>0&&!a.includes(t)&&i([t].concat(Object(L.a)(a)))}),[t,a]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a,{variant:"h5",component:"h2",children:"Counts Seen"}),Object(C.jsx)(S.a,{dense:!0,children:a.map((function(e){return Object(C.jsx)(k.a,{children:Object(C.jsx)(I.a,{primary:e})},e)}))})]})}n(67);var U=Object(v.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},avatar:{width:e.spacing(8),height:e.spacing(8)}}}));function F(){return Object(C.jsx)(d.a,{"data-testid":"initial-loading-indicator"})}var P=function(){var e=U(),t=l(),n=t.isLoadingInitial,r=t.isLoadingUpdate,c=t.error,a=t.count,i=t.requestUpdatedCount;return Object(C.jsxs)(b.a,{children:[Object(C.jsx)(O.a,{open:null!=c,autoHideDuration:6e3,children:Object(C.jsx)(x.a,{elevation:6,variant:"filled",severity:"error","data-testid":"error-alert",children:"An error occurred"})}),Object(C.jsxs)(f.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",style:{minHeight:"100vh"},children:[Object(C.jsxs)(h.a,{elevation:6,style:{padding:40,marginBottom:20},children:[Object(C.jsxs)(f.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:3,children:[Object(C.jsx)(f.a,{item:!0,children:Object(C.jsx)(p.a,{variant:"h3",component:"h1",children:"***REMOVED***"})}),Object(C.jsx)(f.a,{item:!0,children:Object(C.jsx)(g.a,{alt:"Purple Cow",className:e.avatar,src:"***REMOVED***","data-testid":"avatar"})})]}),Object(C.jsx)(f.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:3,children:Object(C.jsx)(f.a,{item:!0,children:n?Object(C.jsx)(F,{}):Object(C.jsx)(y,{count:a,onClick:i,isLoading:r})})})]}),Object(C.jsx)(h.a,{elevation:6,style:{padding:40,height:150,overflowY:"scroll"},children:Object(C.jsx)(f.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:3,children:Object(C.jsx)(f.a,{item:!0,children:Object(C.jsx)(q,{count:a})})})})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},R=n(46),T=n(47),B=n(50),G=n(48),H=function(e){Object(B.a)(n,e);var t=Object(G.a)(n);function n(e){var r;return Object(R.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(T.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"render",value:function(){return this.state.hasError?Object(C.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(c.a.Component);i.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(H,{children:Object(C.jsx)(P,{})})}),document.getElementById("root")),D()}},[[68,1,2]]]);
//# sourceMappingURL=main.7b0b4756.chunk.js.map